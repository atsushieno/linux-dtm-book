
# Linuxで使えるオーディオプラグインの種類

## 概要

オーディオプラグインには「プラグインフォーマット」と呼ばれる概念があります。プログラマー向けに説明するなら、これはAPIの違いです。あるプラグインフォーマットのプラグインをロードできるのは、そのプラグインフォーマットをサポートするDAWのみです。iPhoneアプリがiPhoneでしか動かないように、あるいはAndroidアプリがAndroidでしか動かないように、VST2プラグインはVST2をサポートするDAWでしか使えず、VST3プラグインはVST3をサポートするDAWでしか使えません。VST2とVST3は互換性がありません。

実際には、DAWとプラグインでフォーマットが同一ならというわけではなく、さらに動作プラットフォームとしてLinuxがサポートされていないものをLinuxで動作させることはできません（Wineを使うブリッジの仕組みなどが必要になります）。

「プラットフォームの数 × プラグインフォーマットの数」だけ組み合わせがあって同一でなければならないとなると、絶望的な確率であるように聞こえますが、実際には状況はもう少し楽観的です。DAWの多くは複数のプラグインフォーマットをサポートしています。Linuxの場合、2022年の本書執筆時点で商用製品のDAWはほぼVST2とVST3をサポートしています（筆者の記憶ではRenoiseは未対応です）。オープンソースのDAWではほぼ全てがVST2とLV2をサポートしていて、ReaperもLV2をサポートしています。JUCEの2022年時点での最新メジャーバージョンであるJUCE7がLV2をサポートしたので、JUCEで作られているTracktion Waveformの次世代でも多分LV2をサポートするでしょう。

そして重要なのは、大抵は複数のフォーマットのプラグインを自由に組み合わせることが可能であるということです。LinuxネイティブのDexedでMIDIから演奏して、その出力を第3章で紹介する方法でXFer Records OTTに送ってエフェクトをかける、といった処理が可能です。

オーディオプラグイン開発においては、どのプラットフォームでも実行できるようなソースプログラムを書いて個別のプラットフォーム向け、個別のプラグイン向けのコードは最小限に抑えるやり方がトレンドとなっています。もともと音声データの処理はクロスプラットフォーム開発に向いていて、GUIもオーディオプラグインでできることは限られているので、クロスプラットフォームの技術を採用するデメリットが小さいです。ひとつの製品で複数のプラグインフォーマットをサポートするJUCEやiPlug2といったプラグイン開発フレームワークが流行する理由のひとつでもあります。

最後になりますが、この章では「汎用プラグインフォーマット」についてのみ言及しています。各DAWには固有のビルトインプラグインが用意されており、またReaperのReaPlugのようにユーザーが独自に開発できるものもあります。これらは他のDAWに持ち出すことができませんが、汎用フォーマットのプラグイン同様、自由に組み合わせて利用できるのが一般的です。

## VST2 / VeSTige

VST2はSteinbergが開発した20世紀からあるプラグインフォーマットで、すでにサポートが終了しており、VST2 SDKはオープンソースで公開されていなかったので、開発用のSDKを入手することすらできません。一方で商用製品の世界では、VST2対応製品しか持っていないミュージシャンのために、未だに製品がリリースされ続けているのが現状です。

Linuxでの利用については、特にVST3とは異なりSteinbergのプロプラエタリなライセンスでしか存在しなかったので、VST2 SDKを利用したプラグインは特にオープンソースの世界ではあまり歓迎されませんでした。一方で、VST2のAPIさえ互換性があればSDKが同一の実装である必要はないので、LinuxのMIDIシーケンサーLMMSプロジェクトではVeSTigeと呼ばれるVST2互換APIの実装が開発されました。このVeSTigeにはいくつかの派生バージョンがあって現在ではどこにあるものを使うのが良いかはわかりませんが、DISTRHO/DPFなどでVST2ビルドを実現するために使われています。VeSTigeの利用はSteinbergのライセンス違反であるという俗説も散見されますが、SteinbergからもSteinbergがVeSTigeの利用を禁止することはできないとSteinbergのフォーラム上で明言されています（APIには著作権が無く実装が別物なので当然です）。

DTMerとしては、同じ製品のVST2版とVST3版がある場合は、今後はVST3版を使うようにしていったほうがよいでしょう。VST2版はいつサポートされなくなるかわかりません。

## VST3

VST3はVST2の後継フォーマットですが、VST2とは完全に互換性が無いどころか設計思想も根本的に異なるフォーマットになっています。やや複雑な仕様で、プラグインでもDAWでもなかなかサポートされなかったこともあって、最終的にはSteinbergがVST2 SDKの公開を終了してからようやく普及してきた、というのが一般的なVST開発者の印象でしょう。

VST3はSteinbergがGPLv3ライセンスで公開していることもあって、少なくともフリーソフトウェアの世界では躊躇なく使われています。商用製品をリリースしたい開発者は別途Steinbergから商用ライセンスを得ることになります。

Linux上のVST3サポートは、VST3 SDKの公開当初から十分にあったわけではありませんでした。VST3 SDKが最初に公開されたのは2008年ですが、筆者の感覚でいえば、VST3 SDKがLinux上でも使用に耐えるプラグインをビルドできるところまで成長してきたのは、2010年代後半の話です。その後JUCEでもVST3がサポートされるようになり、Linux上でもVST3プラグインが使われるようになってきました。オープンソースのビルドに関連してJUCEとProjucerについて言及したことがありましたが、古いJUCEプラグインではVST3に対応していないことがあります。DAWのほうも、2020年以降になってLinux VST3サポートが実装されたものが多いです（Ardour, QTractor, Tracktion Waveformなど）。

## LV2

2022年の本書執筆時点ではオーディオプラグインフレームワークはクロスプラットフォームで利用できるのが一般的ですが、従来は「WindowsではVST、MacではAudioUnit」という棲み分けが一般的でした。LV2は「Linux用のプラグインフォーマット」として20世紀末頃に作られたLADSPA (Linux Audio Developer's Simple Plugin API) のバージョン2として策定され発展してきたものです。LV2は実際にはクロスプラットフォームで利用できるように設計されているのですが、現実的にWindowsやMacでLV2をサポートするDAWは一部のオープンソースのものに限られています。

LV2は実際には個人開発者が1人で全て策定しており、かなり独自の技術選択の上に成り立っており、特にセマンティックWebで使われるRDFに基づく仕様書やそのメタデータ文法であるTurtle Syntaxを理解しないとプラグインが開発できないなど、カジュアルな開発者を遠ざける要素が多々あります。それを乗り越えてLV2プラグインを開発する猛者も何人かいますが、限られた世界の話であり、LV2はあまり普及してきませんでした。しかしDISTRHO/DPFやLV2サポートを実現したJUCEのfork（独自版）が使えるようになってきて、それらを使う手法がだんだん共有されてきて、2022年の本書執筆時点ではLinuxデスクトップで最も普及しているプラグインフォーマットと捉えても良いといえます（VST3が拮抗してきたかもしれません）。

LV2をDTMで利用する際の注意点は2つあります。ひとつは商用製品DAWでのサポートがまだ充実していないことです。Reaperと（これを商用製品として評価するなら）ArdourをベースにしたHarrison MixBusくらいです。もうひとつは前述の通りLinux以外でのサポートが絶望的に小さいことです。LV2しかサポートしていないプラグインを使うと、Linuxから他のプラットフォームに楽曲データを移行できないということになります（VST3やVST2の打ち込みで保存された状態データを共有できるとは限りませんが）。

（なおLV2の出発点であるLADSPAについては、今でもサポートしているDAWもありますが、基本的に過去の存在として本書では扱わないことにしました。LADSPAだけをプラグインとしてサポートするLMMSなども言及しません。DSSIも同様とします。）

## CLAP

CLAPは2022年6月にバージョン1.0としてオーディオプラグインフォーマットの世界で新たな挑戦者として出現したもので、まだ採用している製品は多くはないものの、商用製品でもオープンソースでもVST3やLV2が受容されるようになるまでの時間に比べると格段に早いスピードで受容されつつあります。

現状でCLAP「のみ」をサポートする製品はおそらくひとつもないでしょうし、CLAPを積極的に売り出そうとしているBitwig以外の環境でDTMerがCLAPプラグインに依存して打ち込むのは時期尚早と言わざるを得ませんが、QTractorでもサポートされるようになっており、今後は利用する場面が出てくるかもしれません。Bitwigと同じくCLAPをプッシュしているu-heのプラグイン製品（Hiveなど）では、CLAP版がVST3版と同様に手厚くサポートされていくでしょう。

